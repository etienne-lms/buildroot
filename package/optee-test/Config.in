config BR2_PACKAGE_OPTEE_TEST
	bool "optee_test"
	depends on BR2_aarch64 || BR2_ARM_CPU_ARMV7A
	depends on BR2_TARGET_OPTEE_OS
	select BR2_PACKAGE_OPTEE_CLIENT
	help
	  This build option enables OP-TEE test package from the
	  OP-TEE project. It helps platforms to verify the OP-TEE
	  installation against a set of regression and performance
	  tests.

	  The package generates userspace test applications and
	  data files for the Linux userland. It also generates
	  OP-TEE trusted applications embedded in the target
	  directory /lib/optee-armtz. These are loaded into the
	  secure world at runtime.

	  http://github.com/OP-TEE/optee_test

if BR2_PACKAGE_OPTEE_TEST

choice
	prompt "OP-TEE test version"
	default BR2_PACKAGE_OPTEE_TEST_LATEST
	help
	  Select the version of OP-TEE test you want to use

config BR2_PACKAGE_OPTEE_TEST_LATEST
	bool "sync with latest release tag"
	help
	  This fetches the latest registered release tag from
	  the OP-TEE test official Git repository.

config BR2_PACKAGE_OPTEE_TEST_CUSTOM_GIT
	bool "sync with a specific Git"
	help
	  Sync with a specific OP-TEE Git repository.

endchoice

config BR2_PACKAGE_OPTEE_TEST_SYNCED_VERSION
	bool "use same version ref for OP-TEE components"
	depends on BR2_PACKAGE_OPTEE_TEST_LATEST
	help
	  When enabled, OP-TEE examples version must match the version
	  set for the other OP-TEE components.

config BR2_PACKAGE_OPTEE_TEST_VERSION
	string
	default BR2_TARGET_OPTEE_OS_VERSION \
			if BR2_PACKAGE_OPTEE_TEST_SYNCED_VERSION
	default "3.3.0"	if BR2_PACKAGE_OPTEE_TEST_LATEST
	default BR2_PACKAGE_OPTEE_TEST_CUSTOM_REPO_VERSION \
			if BR2_PACKAGE_OPTEE_TEST_CUSTOM_GIT
	help
	  Reference in the target Git repository to sync with.

if BR2_PACKAGE_OPTEE_TEST_CUSTOM_GIT

config BR2_PACKAGE_OPTEE_TEST_CUSTOM_REPO_URL
	string "Git repository site"
	help
	  Specific location of the reference source tree Git
	  repository.

config BR2_PACKAGE_OPTEE_TEST_CUSTOM_REPO_VERSION
	string "target reference to pull in the Git repository"
	help
	  Package version reference to sync with. As source file
	  reference is a Git repository, the version reference can
	  be any Git reference as a tag or a sha1.

endif

endif #BR2_PACKAGE_OPTEE_TEST
